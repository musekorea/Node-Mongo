(()=>{var e={538:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o=function(e){"use strict";var t,n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),c=new D(r||[]);return a._invoke=function(e,t,n){var r=p;return function(o,a){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw a;return M()}for(n.method=o,n.arg=a;;){var c=n.delegate;if(c){var i=k(c,n);if(i){if(i===y)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=d(e,t,n);if("normal"===u.type){if(r=n.done?h:m,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,c),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var p="suspendedStart",m="suspendedYield",f="executing",h="completed",y={};function v(){}function g(){}function b(){}var x={};l(x,c,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(j([])));w&&w!==n&&o.call(w,c)&&(x=w);var L=b.prototype=v.prototype=Object.create(x);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(a,c,i,u){var l=d(e[a],e,c);if("throw"!==l.type){var s=l.arg,p=s.value;return p&&"object"===r(p)&&o.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(p).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,u)}))}u(l.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}}function k(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=d(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function q(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function j(e){if(e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:t,done:!0}}return g.prototype=b,l(L,"constructor",b),l(b,"constructor",g),g.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},e.awrap=function(e){return{__await:e}},S(T.prototype),l(T.prototype,i,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var c=new T(s(t,n,r,o),a);return e.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},S(L),l(L,u,"Generator"),l(L,c,(function(){return this})),l(L,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=j,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(q),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return i.type="throw",i.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],i=c.completion;if("root"===c.tryLoc)return r("end");if(c.tryLoc<=this.prev){var u=o.call(c,"catchLoc"),l=o.call(c,"finallyLoc");if(u&&l){if(this.prev<c.catchLoc)return r(c.catchLoc,!0);if(this.prev<c.finallyLoc)return r(c.finallyLoc)}else if(u){if(this.prev<c.catchLoc)return r(c.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return r(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),q(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;q(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}("object"===r(e=n.nmd(e))?e.exports:{});try{regeneratorRuntime=o}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r](a,a.exports,n),a.loaded=!0,a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=n(538),t=n.n(e);function r(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var c=e.apply(t,n);function i(e){r(c,o,a,i,u,"next",e)}function u(e){r(c,o,a,i,u,"throw",e)}i(void 0)}))}}var a,c,i=document.querySelector("#articleContainer"),u=document.querySelector("#commentBtn"),l=document.querySelector("#commentForm"),s=document.querySelector("#commentCancelBtn"),d=document.querySelector("#commentInput"),p=document.querySelector("#commentsContainer"),m=document.querySelectorAll(".commentsNumber"),f=document.querySelectorAll(".commentDeleteBtn"),h=document.querySelectorAll(".nestedDeleteBtn"),y=document.querySelector("#editBtn"),v=document.querySelector("#dataSet"),g=window.location.href.split("/"),b=g[g.length-1],x=!1,E=!1,w=function(e){var t,n=Math.floor((new Date).getTime()/6e4)-Math.floor(Number(e/6e4));return n<60?(t=n)<=1?"1 minute ago":"".concat(t," minutes ago"):n>=60&&n<1440?(t=Math.floor(n/60))<=1?"1 hour ago":"".concat(t," hours ago"):n>=1440&&n<43200?(t=Math.floor(n/1440))<=1?"1 day ago":"".concat(t," day ago"):n>=43200&&n<518400?(t=Math.floor(n/43200))<=1?"1 month ago":"".concat(t," months ago"):(t=Math.floor(n/518400))<=1?"1 year ago":"".concat(t," years ago")},L=function(e){var t=document.createElement("div");t.className="mb-3",t.style="\n  border: 1px solid rgba(90, 40, 40, 0.1);\n  border-top:none;\n  border-left:none;\n  border-radius: 20px;\n  background-color: aliceblue;\n  box-shadow: 6px 6px 6px rgba(0, 0, 0, 0.2);\n  padding:10px 20px 10px 20px;\n  position:relative;\n";var n=document.createElement("div");n.className="mb-3";var r=document.createElement("img");n.innerHTML="".concat(v.dataset.user," | ").concat(w((new Date).getTime())),r.src=v.dataset.avatar,r.style="width:30px;height:30px;border-radius:50%;margin-right:15px",n.prepend(r);var o=document.createElement("p");o.innerHTML=e;var a=document.createElement("button");a.innerHTML="↩",a.className="nestedCommentBtn",a.style="pointer-events:auto",a.type="button";var c=document.createElement("a");c.className="commentDeleteBtn",c.innerHTML='\n  <button\n      style="\n        color: white;\n        border: none;\n        outline: none;\n        background-color: steelblue;\n        border-radius: 10px;\n        position: absolute;\n        top: 10px;\n        right: 30px;\n      "\n    >\n      Delete\n    </button>',t.append(n,o,a,c),p.prepend(t),E=!1,O();var i=document.createElement("div");p.insertBefore(i,t.nextSibling),M()},S=function(e){d.value="",u.classList.remove("hide"),l.classList.add("hide"),y.classList.remove("hide"),E=!1,f.forEach((function(e){e.style="pointer-events: auto"})),h.forEach((function(e){e.style="pointer-events: auto"})),document.querySelectorAll(".nestedCommentBtn").forEach((function(e){e.style="pointer-events: auto"}))},T=function(){var e=o(t().mark((function e(n){var r,o,a,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=d.value,e.prev=2,e.next=5,fetch("/community/comments/".concat(b),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:r})});case 5:if(200!==(o=e.sent).status){e.next=20;break}return S(),L(r),e.next=11,o.json();case 11:a=(a=e.sent).commentID,(c=p.firstElementChild).id=a,c.nextElementSibling.className=a,O(),E=!1,m.forEach((function(e){e.innerText="".concat(Number(e.innerText)+1)}));case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e,t){var n=v.dataset.user,r=v.dataset.avatar;document.querySelector("#nestedForm").remove();var o=document.createElement("div");o.className="mb-3",o.id="".concat(e),o.style="\n  border: 1px solid rgba(90, 40, 40, 0.1);\n  border-top:none;\n  border-left:none;\n  border-radius: 20px;\n  background-color: thistle;\n  box-shadow: 6px 6px 6px rgba(0, 0, 0, 0.2);\n  padding:10px 20px 10px 20px;\n  position:relative;\n  left:20%;\n  width:80%\n";var c=document.createElement("div");c.className="mb-3";var i=document.createElement("img");c.innerHTML="".concat(n," | ").concat(w((new Date).getTime())),i.src=r,i.style="width:30px;height:30px;border-radius:50%;margin-right:15px",c.prepend(i);var u=document.createElement("p");u.innerHTML=t;var l=document.createElement("a");l.className="nestedDeleteBtn",l.innerHTML='\n  <button\n      style="\n        color: white;\n        border: none;\n        outline: none;\n        background-color: steelblue;\n        border-radius: 10px;\n        position: absolute;\n        top: 10px;\n        right: 30px;\n      "\n    >\n      Delete\n    </button>',o.append(c,u,l),document.querySelector('[id="'.concat(a,'"]')).nextElementSibling.append(o),O(),B(),x=!1,E=!1},N=function(){var e=o(t().mark((function e(n){var r,o,c,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==(r=n.target.children[0].value)&&r){e.next=8;break}return(o=document.querySelector("#nestedInput")).placeholder="Must not be empty 🤸‍♀️",o.classList.add("placeholderError"),x=!0,e.abrupt("return");case 8:return e.prev=8,e.next=11,fetch("/community/nested/".concat(b),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({postID:b,commentID:a,content:r})});case 11:return c=e.sent,e.next=14,c.json();case 14:i=e.sent,200===c.status&&(x=!1,E=!1,k(i.nestedCommentID,r)),u.style="pointer-events: auto",y.style="pointer-events: auto",m.forEach((function(e){e.innerText="".concat(Number(e.innerText)+1)})),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),console.log(e.t0);case 24:case"end":return e.stop()}}),e,null,[[8,21]])})));return function(t){return e.apply(this,arguments)}}(),q=function(e){if(!0!==E)if(!1===x){c=e.target.parentElement,a=c.id;var t=document.createElement("form");t.id="nestedForm",t.className="input-group mb-3";var n=document.createElement("input");n.id="nestedInput",n.className="form-control",n.placeholder="Add a comment",n.ariaRoleDescription="button-addon2";var r=document.createElement("button");r.className="btn btn-outline-secondary",r.id="button-addon2",r.innerHTML="reply",r.style="background-color:tomato;color:white",t.append(n),t.append(r),p.insertBefore(t,c.nextSibling),u.style="pointer-events: none",y.style="pointer-events: none",t.addEventListener("submit",N),x=!0,document.querySelectorAll(".commentDeleteBtn").forEach((function(e){e.style="display:none"})),h.forEach((function(e){e.style="display:none"}))}else document.querySelector("#nestedForm").remove(),x=!1,u.style="pointer-events: auto",y.style="pointer-events: auto",document.querySelectorAll(".commentDeleteBtn").forEach((function(e){e.style="display:block"})),h.forEach((function(e){e.style="display:block"}))},D=function(){var e=o(t().mark((function e(n){var r,o,a,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(r=n.target.parentElement.parentElement).nextElementSibling.innerHTML){e.next=13;break}return document.body.style="overflow:hidden",(o=document.createElement("div")).id="nestedModal",o.style="position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.4);overflow:hidden",o.innerHTML='\n    <div class="modal-dialog" style="top:30%">\n      <div class="modal-content">\n        <div class="modal-body">\n          <p>If the comment has a nested comment, you\'cant delete</p>\n        </div>\n        <div class="modal-footer">\n          <button id="nestedModalBtn" type="button" class="btn btn-secondary" >Close</button>\n        </div>\n      </div>\n    </div>\n  ',i.append(o),document.querySelector("#nestedModalBtn").addEventListener("click",(function(){o.remove(),document.body.style="overflow:auto"})),e.abrupt("return");case 13:return e.prev=13,e.next=16,fetch("/community/comments/".concat(b),{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentID:r.id})});case 16:200===e.sent.status&&(a=document.querySelector('[id="'.concat(r.id,'"]')),c=document.querySelector('[class="'.concat(r.id,'"]')),m.forEach((function(e){e.innerText="".concat(Number(e.innerText)-1)})),a.remove(),c.remove()),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[13,20]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=o(t().mark((function e(n){var r,o,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.target.parentElement.parentElement,o=n.target.parentElement.parentElement.parentElement.className,a=r.id,e.prev=3,e.next=6,fetch("/community/nested/".concat(a),{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({postID:b,commentID:o})});case 6:200===e.sent.status&&(m.forEach((function(e){e.innerText="".concat(Number(e.innerText)-1)})),r.remove()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();u&&u.addEventListener("click",(function(e){e.preventDefault(),u.classList.add("hide"),l.classList.remove("hide"),y.classList.add("hide"),E=!0,f.forEach((function(e){e.style="pointer-events: none"})),h.forEach((function(e){e.style="pointer-events: none"})),document.querySelectorAll(".nestedCommentBtn").forEach((function(e){e.style="pointer-events: none"}))})),s&&s.addEventListener("click",S),l&&l.addEventListener("submit",T);var M=function(){(f=document.querySelectorAll(".commentDeleteBtn"))&&f.forEach((function(e){e.addEventListener("click",D)}))},O=function(){"true"===i.dataset.isloggedin&&document.querySelectorAll(".nestedCommentBtn").forEach((function(e){e.addEventListener("click",q)}))},B=function(){h&&(h=document.querySelectorAll(".nestedDeleteBtn")).forEach((function(e){e.addEventListener("click",j)}))};O(),M(),B()})()})();