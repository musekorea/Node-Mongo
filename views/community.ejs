<html>
  <head>
    <%- include("./components/HEADS.ejs")%>
    <script defer src="/js/community.js"></script>
    <title>Code Me : Schedule List</title>
  </head>
  <body>
    <%- include("./components/NAVBAR.ejs")%>
    <div class="container mt-3">
      <h3 class="text-center">Community</h3>
      <div class="mb-3" style="padding: 0 5px;">
        <span>sort by:</span>
        <%if(locals.type===`new`){%>
        <button id="newSortBtn" class="sortBtns"><a class="active" href="/community/sort/new"> ⏱ New</a> </button>
        <button id="popularSortBtn" class="sortBtns "> <a href="/community/sort/popular"> 🏆 Popular</a></button> 
        <%}else if(locals.type===`popular`){%>
          <button id="newSortBtn" class="sortBtns "><a href="/community/sort/new"> ⏱ New</a> </button>
          <button id="popularSortBtn" class="sortBtns"> <a class="active" href="/community/sort/popular"> 🏆 Popular</a></button> 
        <%}else{%>
          <button id="newSortBtn" class="sortBtns "><a class="active" href="/community/sort/new"> ⏱ New</a> </button>
          <button id="popularSortBtn" class="sortBtns"> <a href="/community/sort/popular"> 🏆 Popular</a></button> 
        <%}%>
      </div>
<!-- ========POST LIST===================-->
      <div class="list-group">
        <%locals.posts.forEach((post)=>{%>
          <%- include("./components/POST.ejs", {post})%>  
        <%})%>
      </div>

<!--============= PAGINATION============-->
        <ul class="pagination justify-content-center">
          <li id="prePageBtn"  class="page-item">
            <a class="page-link" href="#">Previous</a>
          </li>
          <%for(let i=1; i<=locals.totalPage;i++){%>
            <li class="page-item pageBtn"><a class="page-link pagelink" href="/community/community/<%=i%>"><%=i%></a></li>
          <%}%>
          <li id="nextPageBtn" class="page-item ">
            <a class="page-link" href="#">Next</a>
          </li>
          <%if(locals.isLoggedIn){%>
          <a href="/community/article"><button type="button" class="btn btn-success" style="margin-left: 50px;">Write a Post</button></a>
          <%}%>
        </ul>
  </body>
</html>
